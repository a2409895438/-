# Linux

s



# 操作系统 计网相关

## 1. 协程

“轻量级线程”

进程/内核态线程切换的时候需要与OS内核进行交互，保存/读取 CPU 上下文信息。内核态（Kernel）的一些数据是共享的，读写时需要同步机制，所以操作一旦陷入内核态就会消耗更多的时间

进程需要与操作系统中所有其他进程进行资源争抢，且操作系统中资源的锁是全局的；线程之间的数据一般在进程内共享，所以线程间资源共享相比如进程而言要轻一些。

协程并没有增加线程的数量，只是在线程的基础上通过分时复用的方式运行多个协程，而且协程的切换在用户态完成，切换的代价比线程从用户态到内核态的代价小很多。

## 2. 死锁的4个条件

1. 互斥条件：一个资源每次只能被一个进程使用，即资源仅能让一个进程使用而不支持进个线程同时使用。
2. 请求与保持条件：已经拥有资源的进程在请求其他资源时并没有释放当前资源，或者进程已经保持至少一个资源，但又提出了新的资源请求，而该资源已被其他进程占有，此时请求进程阻塞，但又对自己已获得的资源保持不放。
3. 不剥夺条件：已经获得的资源在自主释放前不能使用其他手段剥夺。
4. 循环等待条件：若干进程之间形成一种头尾相接的循环等待资源关系，即各个线程对资源的需求构成了一个循环。